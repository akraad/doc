#!/bin/bash

# نام فایل خروجی را مشخص کنید
OUTPUT_FILE="XLMResult.txt"

# پوشه‌ای که میخواهید محتوای آن را استخراج کنید
# این اسکریپت باید از ریشه (root) پروژه اندروید شما اجرا شود
SEARCH_DIR="app/src/main/res"

# در ابتدای اجرا، فایل خروجی را ایجاد یا محتوای قبلی آن را پاک می‌کند
> "$OUTPUT_FILE"

echo "در حال خواندن فایل‌های XML از پوشه '$SEARCH_DIR'..."

# با استفاده از دستور find، فقط فایل‌هایی با پسوند .xml را پیدا کن
# *** این خط اصلاح شده است ***
find "$SEARCH_DIR" -type f -name "*.xml" | while read -r file; do
    # یک جداکننده برای هر فایل در خروجی چاپ می‌شود
    echo "==================================================" >> "$OUTPUT_FILE"
    # نام فایل (بدون مسیر)
    echo "File Name: $(basename "$file")" >> "$OUTPUT_FILE"
    # آدرس کامل فایل
    echo "File Path: $file" >> "$OUTPUT_FILE"
    echo "-------------------- CONTENT ---------------------" >> "$OUTPUT_FILE"
    
    # با دستور cat، محتوای فایل خوانده و به فایل خروجی اضافه می‌شود
    cat "$file" >> "$OUTPUT_FILE"
    
    # یک خط خالی و جداکننده پایانی برای خوانایی بهتر
    echo "" >> "$OUTPUT_FILE"
    echo "==================================================" >> "$OUTPUT_FILE"
    echo "" >> "$OUTPUT_FILE"
done

echo "عملیات با موفقیت انجام شد. نتایج در فایل '$OUTPUT_FILE' ذخیره گردید."

